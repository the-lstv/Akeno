# This is the default config that will get created after you first launch the server.


system {
    # You can enable development mode when debugging.
    # developmentMode;
    # logLevel: 5;
}

server {
    # The port to use for HTTP
    port: 80;

    # Enable SSL (HTTPS)
    # enableSSL;
    sslPort: 443;

    # Enable HTTP3
    # enableH3;
    h3Port: 443;

    # Enable server
    enable;
}

web {
    locations:
        # Website locations - /* searches all subdirectories as individual locations.
        "/var/www/akeno/*",
        "/var/lib/akeno/examples/hello-world-website",
        "/var/lib/akeno/core/gui"
    ;
}


# API configuration
api {
    default: 1;
}

# Example of an API version. This will route /v1/ API requests to api/v1.example.js
api.version(1) {
    module: v1.example.js;
}

# Setup domains to route to API:
route ("api.example.com") { to: api }



sslRouter {
    # Currently the options for sslRouter are very limited and only suited for a thin range of configurations
    # To allow multiple certificates, you add server names below.

    certBase: "/etc/letsencrypt/live/{domain}/fullchain.pem";
    keyBase: "/etc/letsencrypt/live/{domain}/privkey.pem";

    domains:
        example.com, # Only example.com
        *.example2.com, # example2.com + all subdomains
        another.example3.com # Only another.example3.com
    ;

    autoAddDomains;
    subdomainWildcard;
}

# If you intend to use a SQL database, eg. for user management
database {
    db: "...";
    host: "...";
    user: "...";
    password: "...";
}


# More info on libraries is in /cdn/lib
cdn.libraries {
    locations:
        "./cdn/lib/*",
    ;
}


performance {
    # Compress JS, HTML, CSS on the fly
    code-compression;

    # Cache to both disk and memory
    cache-to: disk, memory;

    # Enable the ?mtime query to be added to requests, automatically refreshing files that have been changed while caching still works.
    mtime-query;
}


# Import generated configs created automatically by the CLI
import("./etc/generated");